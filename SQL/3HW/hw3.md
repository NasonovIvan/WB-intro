## Отеты на задания № 2-5

2. **Какой тип связи/отношения между таблицами users и ratings? Между таблицами  items, ratings?**

- users и ratings - связь один-ко-многим, потому что один user может написать несколько отзывов на разные товары (или даже на один и тот же)
- items и ratings - тоже один-ко-многим, так как каждый item из БД товаров может иметь несколько отзывов в ratings (например от разных пользователей).

3. **К какой/каким из созданных таблиц вы бы предложили создать индекс? Объясните, почему.**

- Я создал дополнительный индекс (PRIMARY KEY) в таблице ratings, чтобы различать отзывы, поскольку может произойти ситуация, когда один пользователь оставит несколько отзывов на один и тот же товар. Для этого необходимо различать эти отзывы. По дате это делать неудобно, ведь он может оставить два отзыва даже в один день.

4. **Отметьте те команды, которые смогут добавить записи в таблицу. Объясните, почему.**

```sql
-- 1
INSERT INTO Car VALUES ('7984672834', 'E340BT, 77, Lada Granta',
 'Kрасный', 87, 2017, 35)
```
Во первых данный вопрос содержит опечатку (кавычки перед значением 77 не закрыты, а значит значение 'Красный' идет на int-ый столбец), а во вторых он не выполнится, потому что PK завязан на таблице Car_owner и делать insert (или update) других значений в этот столбец нельзя

```sql
-- 2
INSERT INTO Car_owner VALUES ('7984672834', 'Иван Петров')
```
Выполнится, все в порядке (insert по правильным типам данных)

```sql
-- 3
INSERT INTO Car_ownerCar_owner VALUES ('7984672834', 'Татьяна Иванова')
```
Ошибка в названии таблицы 'Car_ownerCar_owner'

Если опечатку исправить, то все заработает

```sql
-- 4
INSERT INTO Car Owner VALUES ('4752909757', 'Mван Петров')
```
Снова опечатка в названии таблицы
Если исправить - заработает
```sql
-- 5
INSERT INTO Car VALUES ('6239572784', 'E340BT', 77, 'Volkswagen Polo',
 'Синий', 105, 2018, 40)
```
Не выполнится, аналогично 1 запросу - такого РК нет в таблице

```sql
-- 6
INSERT INTO Car VALUES ('4752909757', 'A822EY', 99, 'Skoda Rapid',
 'черный', 125, 2021, 35)
```
Не выполнится, аналогично 1 запросу - такого РК нет в таблице

А если в 4 запросе исправить опечатку, то тогда заработает, потому что в РК Car_owner будет ИНН '4752909757'

```sql
-- 7
INSERT INTO Car VALUES ('7984672834', 'A822EY', 99, 'Hyundai Solaris',
 'черный', 123, 2019, 20)
```
Выполнится, так как в РК Car_owner есть ИНН '7984672834'

```sql
-- 8
INSERT INTO Car VALUES ('74478679847', '8971HP, 199, 'Kia Sportage',
 'бeлый', 18, 2017, 35)
```
Не выполнится из-за опечатки с кавычками (после 8971HP не закрыта), но даже если исправить, то не выполнится, так как в значении 74478679847 больше 10 символов, а значит оно не вставится (ну и ИНН такого нет в базе Car_owner)


```sql
-- 9
INSERT INTO Car VALUES ('7984672834', 'E340BT, 77, 'Toyota RAV4',
 'Серебристо-серый, 146, 2019)
```
Опять проблема с кавычками после E340BT и Серебристо-серый, но если исправить, то выполнится, так как есть РК 7984672834

```sql
-- 10
INSERT INTO Car VALUES ('7984672834', 'H454EE', 98, 'Skoda Rapid',
 'чeрный', 45, 2021, 0)
```
Не выполнится, так как есть ограничение на Power>50, а здесь оно 45

5. **Можно ли использовать данный скрипт для шардинга таблицы на 32 документа?**

Да, этот скрипт можно использовать для шардинга таблицы на 32 документа и генерации 16 тестовых таблиц, потому что мы создаем 16 тестовых таблиц, каждая из которых будет содержать документы, соответствующие конкретному остатку от деления id на 16. То есть каждая из этих таблиц будет содержать документы с различными id, соответствующими различным остаткам от деления на 16

Поэтому как раз получится 32 шарда (от 0 до 31) и каждая таблица будет содержать по 2 документа.
